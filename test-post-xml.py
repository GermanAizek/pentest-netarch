import requests
from time import sleep
from common import *

xmlPayloads = []
headers = {'Content-Type': 'application/xml'} # set what your server accepts

# load payloads
with open("payloads/xml/xml_payload.txt") as file:
	xmlPayloads = file.read().splitlines()

for idx, payload in enumerate(xmlPayloads):
	with open("post_xml_report.txt", "a+") as f:
		f.write("= BEGIN REPORT =")
		f.write("Request #" + str(idx))
		f.write(str(requests.post(config['GENERAL']['URL'], data=payload, headers=headers).text.encode("utf-8")))
		f.write('\n')
		sleep(1)
